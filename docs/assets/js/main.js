"use strict";const arrowRotate1=document.querySelector(".js_arrow-1"),arrowRotate2=document.querySelector(".js_arrow-2"),arrowRotate3=document.querySelector(".js_arrow-3"),designLegend=document.querySelector(".js__design"),designContainer=document.querySelector(".js__design__container"),fillLegend=document.querySelector(".js__fill"),fillContainer=document.querySelector(".js__fill__container"),shareLegend=document.querySelector(".js__share"),shareContainer=document.querySelector(".js__share__container"),shareContainer2=document.querySelector(".js__share__container2"),shareButton=document.querySelector(".js__shareBtn");designLegend.addEventListener("click",e=>{shareContainer.classList.add("collapsed"),shareContainer2.classList.add("collapsed"),designContainer.classList.remove("collapsed"),fillContainer.classList.add("collapsed"),arrowRotate1.classList.add("rotate"),arrowRotate2.classList.remove("rotate"),arrowRotate3.classList.remove("rotate")}),fillLegend.addEventListener("click",()=>{designContainer.classList.add("collapsed"),shareContainer.classList.add("collapsed"),shareContainer2.classList.add("collapsed"),fillContainer.classList.remove("collapsed"),arrowRotate1.classList.remove("rotate"),arrowRotate2.classList.add("rotate"),arrowRotate3.classList.remove("rotate")}),shareLegend.addEventListener("click",e=>{designContainer.classList.add("collapsed"),fillContainer.classList.add("collapsed"),shareContainer.classList.remove("collapsed"),arrowRotate1.classList.remove("rotate"),arrowRotate2.classList.remove("rotate"),arrowRotate3.classList.add("rotate")}),shareButton.addEventListener("click",e=>{e.preventDefault(),shareContainer2.classList.remove("collapsed")});const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profilePreview=document.querySelector(".js__profile-preview"),redPreview=document.querySelector(".js__red-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profilePreview.style.backgroundImage=`url(${fr.result})`,redPreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}fileField.addEventListener("change",getImage);const radio1=document.querySelector(".js_radio-1"),radio2=document.querySelector(".js_radio-2"),radio3=document.querySelector(".js_radio-3"),radio4=document.querySelector(".js_radio-4"),previewCard=document.querySelector(".js__preview");function handleClickRadio1(){previewCard.classList.remove("palette-2","palette-3","palette-4"),previewCard.classList.add("palette-1"),data.palette=1}function handleClickRadio2(){previewCard.classList.remove("palette-1","palette-3","palette-4"),previewCard.classList.add("palette-2"),data.palette=2}function handleClickRadio3(){previewCard.classList.remove("palette-1","palette-2","palette-4"),previewCard.classList.add("palette-3"),data.palette=3}function handleClickRadio4(){previewCard.classList.remove("palette-1","palette-2","palette-3"),previewCard.classList.add("palette-4"),data.palette=4}radio1.addEventListener("input",handleClickRadio1),radio2.addEventListener("input",handleClickRadio2),radio3.addEventListener("input",handleClickRadio3),radio4.addEventListener("input",handleClickRadio4);const previewName=document.querySelector(".js__preview_name"),previewJob=document.querySelector(".js__description"),previewMail=document.querySelector(".js__preview_mail"),previewTelephone=document.querySelector(".js__preview_telephone"),previewLinkedIn=document.querySelector(".js__preview_linkedin"),previewGitHub=document.querySelector(".js__preview_github"),fillInput=document.querySelector(".js__fill");let data={palette:1,name:"",job:"",photo:"",email:"",phone:"",linkedin:"",github:""};function renderPreview(){""===data.name?previewName.innerHTML="Name Surname":previewName.innerHTML=data.name,""===data.job?previewJob.innerHTML="Front-end developer":previewJob.innerHTML=data.job,previewMail.href="mailto:"+data.email,previewTelephone.href="tel:"+data.phone,previewLinkedIn.href=data.linkedin,previewGitHub.href="https://github.com/"+data.github.replace("@","")}function handlerInputs(e){const t=e.target.id,a=e.target.value;data[t]=a,renderPreview()}fillInput.addEventListener("keyup",handlerInputs);const resetBtn=document.querySelector(".js__resetbtn"),nameInput=document.querySelector(".js__name"),jobInput=document.querySelector(".js__job"),emailInput=document.querySelector(".js__email"),telephoneInput=document.querySelector(".js__telephone"),linkedinInput=document.querySelector(".js__linkedin"),githubInput=document.querySelector(".js__github"),handleReset=e=>{e.preventDefault();for(let e in data)data[e]="";profilePreview.style.backgroundImage="",redPreview.style.backgroundImage="",nameInput.classList.remove("borderRedEmpty"),jobInput.classList.remove("borderRedEmpty"),redPreview.classList.remove("borderRedEmpty"),emailInput.classList.remove("borderRedEmpty"),nameInput.value="",jobInput.value="",emailInput.value="",telephoneInput.value="",linkedinInput.value="",githubInput.value="",shareButton.classList.remove("disabled__button"),shareButton.innerHTML='<i class="fa-regular fa-address-card"></i> CREATE CARD',msgError.innerHTML="",msgErrorMail.innerHTML="",shareContainer.classList.add("collapsed"),shareContainer2.classList.add("collapsed"),designContainer.classList.remove("collapsed"),handleClickRadio1(),radio1.checked=!0,renderPreview()},handleMailBtn=e=>{""===emailInput.value&&e.preventDefault()},handleTelephoneBtn=e=>{""===telephoneInput.value&&e.preventDefault()},handleLinkedinBtn=e=>{""===linkedinInput.value&&e.preventDefault()},handleGitHubBtn=e=>{""===githubInput.value&&e.preventDefault()};resetBtn.addEventListener("click",handleReset),previewMail.addEventListener("click",handleMailBtn),previewTelephone.addEventListener("click",handleTelephoneBtn),previewLinkedIn.addEventListener("click",handleLinkedinBtn),previewGitHub.addEventListener("click",handleGitHubBtn);const linkUrl=document.querySelector(".js_url"),msgError=document.querySelector(".js_msg-error"),msgErrorMail=document.querySelector(".js_msg-errorMail"),msgSuccess=document.querySelector(".js_success-msg"),btnTwitter=document.querySelector(".js_btnTw");function msgAlert(){msgError.innerHTML="Attention! You have forgotten to complete some required fields*"}function msgAlert2(){msgErrorMail.innerHTML=" The e-mail format is not valid*"}const setLocalStorage=()=>{localStorage.setItem("infoCard",JSON.stringify(data))},getLocalStorage=()=>{const e=localStorage.getItem("infoCard");e&&(data=JSON.parse(e)),renderPreview()};getLocalStorage();const sendApiData=()=>{fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{linkUrl.innerHTML=e.cardURL,linkUrl.href=e.cardURL,btnTwitter.href=`https://twitter.com/intent/tweet?url=${linkUrl.href}&text=Ya%20estoy%20suscrita%20al%20Adalab%20Tech%20Summit%21%21%21&hashtags=Adalab`,shareButton.classList.add("disabled__button"),shareButton.innerHTML='<i class="fa-regular fa-address-card"></i> CREATED CARD',msgSuccess.innerHTML="Your card has been created:"})};function handleClickCreateBtn(e){e.preventDefault();const t=emailInput.value;""===data.name&&nameInput.classList.add("borderRedEmpty"),""===data.job&&jobInput.classList.add("borderRedEmpty"),""===data.photo&&redPreview.classList.add("borderRedEmpty"),""===data.email&&emailInput.classList.add("borderRedEmpty"),""!==data.name&&""!==data.job&&""!==data.photo&&""!==data.email?fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{linkUrl.innerHTML=e.cardURL,linkUrl.href=e.cardURL,btnTwitter.href=`https://twitter.com/intent/tweet?url=${linkUrl.href}&text=Ya%20estoy%20suscrita%20al%20Adalab%20Tech%20Summit%21%21%21&hashtags=Adalab`,shareButton.classList.add("disabled__button"),shareButton.innerHTML='<i class="fa-regular fa-address-card"></i> CREATED CARD',msgSuccess.innerHTML="Your card has been created:"}):(msgAlert(),fillContainer.classList.remove("collapsed"),shareContainer2.classList.add("collapsed")),t.match(/^[^@]+@[^@]+\.[a-zA-Z]{2,}$/)||msgAlert2(),localStorage.setItem("infoCard",JSON.stringify(data))}shareButton.addEventListener("click",handleClickCreateBtn);